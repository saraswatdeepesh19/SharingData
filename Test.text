 @Query("SELECT new com.example.dto.DeviceCountDto(d.deviceName, d.projectName, d.deviceStatus, d.type, " +
           "(SELECT COUNT(d2) FROM Device d2 WHERE d2.projectName = 'SHARED') AS sharedCount, " +
           "(SELECT COUNT(d3) FROM Device d3 WHERE d3.projectName <> 'SHARED') AS nonSharedCount) " +
           "FROM Device d")
    List<DeviceCountDto> fetchDeviceDetailsWithCounts();
