package com.example.service;

import com.example.dto.DeviceDetailsDto;
import com.example.dto.DeviceResponseDto;
import com.example.repository.DeviceRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class DeviceService {

    @Autowired
    private DeviceRepository deviceRepository;

    public DeviceResponseDto getDeviceDetailsWithCounts() {
        List<DeviceDetailsDto> devices = deviceRepository.fetchDeviceDetails();
        Long sharedCount = deviceRepository.countSharedProjects();
        Long nonSharedCount = deviceRepository.countNonSharedProjects();

        return new DeviceResponseDto(devices, sharedCount, nonSharedCount);
    }
}
